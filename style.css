/* --- ãƒ•ã‚©ãƒ³ãƒˆã¨è‰²å®šç¾© --- */
:root {
    --primary-bg: #1a1a2e; /* ãƒ€ãƒ¼ã‚¯ãƒ–ãƒ«ãƒ¼ */
    --secondary-bg: #1f4068; /* ãƒŸãƒƒãƒ‰ãƒŠã‚¤ãƒˆãƒ–ãƒ«ãƒ¼ */
    --accent-color: #00ff9d; /* ãƒãƒˆãƒªãƒƒã‚¯ã‚¹é¢¨ã®ãƒã‚ªãƒ³ã‚°ãƒªãƒ¼ãƒ³ */
    --text-color: #e0e0e0; 
    --highlight-color: #ffd700; /* ã‚´ãƒ¼ãƒ«ãƒ‰ */
    --font-primary: 'Montserrat', sans-serif;
    --font-secondary: 'Roboto Mono', monospace;
    --slot-bg: #111;
    --slot-height: 120px; /* ã‚¹ãƒ­ãƒƒãƒˆã®é«˜ã• */
    --primary-btn-bg: var(--highlight-color);
}

/* --- å…¨ä½“è¨­å®š --- */
body.modern-theme {
    font-family: var(--font-primary);
    background-color: var(--primary-bg);
    color: var(--text-color);
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    margin: 0;
    padding: 20px;
    overflow: hidden; 
}

.app-container {
    background-color: var(--secondary-bg);
    border-radius: 12px;
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.5);
    width: 90%;
    max-width: 1400px;
    height: calc(100vh - 40px);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

/* --- ãƒ˜ãƒƒãƒ€ãƒ¼ --- */
.app-header {
    padding: 15px 30px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-shrink: 0;
    background-color: #162a40;
}

.app-logo {
    font-size: 1.8em;
    font-weight: 700;
    margin: 0;
    color: var(--accent-color);
    text-shadow: 0 0 10px rgba(0, 255, 157, 0.5);
}
.app-logo .fas {
    margin-right: 10px;
}

.volume-control {
    display: flex;
    align-items: center;
    color: var(--text-color);
}
#volume-slider {
    width: 100px;
    -webkit-appearance: none;
    height: 4px;
    background: rgba(255, 255, 255, 0.2);
    outline: none;
    border-radius: 2px;
}
#volume-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 14px;
    height: 14px;
    border-radius: 50%;
    background: var(--highlight-color);
    cursor: pointer;
    box-shadow: 0 0 5px var(--highlight-color);
}

/* --- ãƒ¡ã‚¤ãƒ³ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã¨æŠ½é¸ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« --- */
.main-layout {
    display: flex;
    flex-grow: 1;
    padding: 20px;
    gap: 20px;
    overflow: hidden;
}

.draw-module {
    flex: 3;
    background-color: #0d162a;
    border-radius: 8px;
    box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.3);
    padding: 20px;
    display: flex;
    flex-direction: column;
    position: relative;
    overflow: hidden;
}

.current-prize-display {
    font-size: 1.4em;
    font-weight: 700;
    color: var(--highlight-color);
    background-color: var(--secondary-bg);
    padding: 10px 15px;
    border-radius: 6px;
    margin-bottom: 20px;
    text-align: center;
    flex-shrink: 0;
}

.animation-stage.slot-stage {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 20px;
    position: relative;
}

/* --- ã‚¹ãƒ­ãƒƒãƒˆãƒã‚·ãƒ³ã®è¡¨ç¤ºéƒ¨åˆ† --- */
.slot-machine-display {
    display: flex;
    gap: 15px;
    margin-bottom: 30px;
}

.slot-digit {
    width: 90px;
    height: var(--slot-height);
    line-height: var(--slot-height);
    text-align: center;
    font-family: var(--font-secondary);
    font-size: 5em;
    font-weight: 700;
    background-color: var(--slot-bg);
    color: var(--accent-color);
    border-radius: 8px;
    overflow: hidden; /* â˜…é‡è¦: æ•°å­—ãŒä¸Šä¸‹ã™ã‚‹ã®ã‚’ã“ã®æ ã§éš ã™ */
    /* ãƒ‡ã‚¸ã‚¿ãƒ«ãªå…‰ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ */
    box-shadow: 0 0 15px var(--accent-color);
    border: 3px solid var(--accent-color);
    transition: all 0.3s ease;
    position: relative; /* æ“¬ä¼¼è¦ç´ ã®ä½ç½®æ±ºã‚ã®ãŸã‚ */
}

/* ğŸ’¡ ã‚¹ãƒ­ãƒƒãƒˆãƒ‰ãƒ©ãƒ ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
@keyframes drum-spin {
    0% { transform: translateY(0); }
    100% { transform: translateY(-1000%); } /* 10å›åˆ†ä¸Šã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ« */
}

.slot-digit.spinning {
    animation: none; /* åŸºæœ¬ã®è„ˆå‹•ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è§£é™¤ */
    color: transparent; /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ä¸­ã¯ç¢ºå®šå€¤ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’é€æ˜ã« */
}

/* ğŸ’¡ ãƒ‰ãƒ©ãƒ ãƒ­ãƒ¼ãƒ«ã®è¦–è¦šè¡¨ç¾ (æ“¬ä¼¼è¦ç´ ã§0-9ã‚’é€£ç¶šã—ã¦è¡¨ç¤º) */
.slot-digit.spinning::before {
    /* \A ã¯CSSã§ã®æ”¹è¡Œã‚³ãƒ¼ãƒ‰ã€‚æ•°å­—ã‚’ç¸¦ã«ä¸¦ã¹ã‚‹ */
    content: "0\A1\A2\A3\A4\A5\A6\A7\A8\A9\A0\A1\A2\A3\A4\A5\A6\A7\A8\A9"; 
    white-space: pre; /* æ”¹è¡Œã‚’æœ‰åŠ¹ã«ã™ã‚‹ */
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 2000%; /* contentã®é«˜ã•ã«åˆã‚ã›ã¦ã€ååˆ†ãªé•·ã•ã‚’ç¢ºä¿ */
    color: var(--accent-color);
    animation: drum-spin 0.2s linear infinite; /* ç¸¦ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’é©ç”¨ */
    line-height: var(--slot-height);
}

/* æ¡ãŒç¢ºå®šã—ãŸã¨ã */
@keyframes pulse-winner {
    0% { transform: scale(1.0); }
    100% { transform: scale(1.02); }
}

.slot-digit.winner-digit {
    color: var(--highlight-color); /* ç¢ºå®šã—ãŸæ•°å­—ã®è‰² */
    border-color: var(--highlight-color);
    box-shadow: 0 0 30px var(--highlight-color), inset 0 0 10px var(--highlight-color);
    animation: pulse-winner 1s infinite alternate;
}

.slot-digit.winner-digit::before {
    content: none; /* ç¢ºå®šã—ãŸã‚‰ãƒ‰ãƒ©ãƒ ãƒ­ãƒ¼ãƒ«ã®æ“¬ä¼¼è¦ç´ ã‚’å‰Šé™¤ */
}

/* --- å½“é¸è€…æƒ…å ±ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ (ã‚¹ãƒ­ãƒƒãƒˆã®ä¸‹ã«è¡¨ç¤º) --- */
.winner-info-overlay {
    position: relative;
    padding: 20px 40px;
    border-radius: 10px;
    background-color: rgba(0, 0, 0, 0.7);
    color: var(--highlight-color);
    font-size: 1.8em;
    font-weight: 700;
    text-align: center;
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.5s ease-out, transform 0.5s ease-out;
    box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
    line-height: 1.4;
    z-index: 10;
}
.winner-info-overlay.show {
    opacity: 1;
    transform: translateY(0);
}

/* --- ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ‘ãƒãƒ« --- */
.control-panel {
    display: flex;
    gap: 15px;
    justify-content: center;
    flex-shrink: 0;
}

.action-btn {
    font-family: var(--font-primary);
    padding: 12px 25px;
    font-size: 1.1em;
    font-weight: 700;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s ease-in-out;
    min-width: 150px;
    border: none;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

.primary-btn {
    background-color: var(--highlight-color);
    color: var(--primary-bg);
    box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);
}
.primary-btn:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(255, 215, 0, 0.6);
}

.secondary-btn {
    background-color: var(--accent-color);
    color: var(--primary-bg);
    box-shadow: 0 4px 10px rgba(0, 255, 157, 0.3);
}
.secondary-btn:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 6px 15px rgba(0, 255, 157, 0.5);
}

.tertiary-btn {
    background-color: #4b5d7d;
    color: var(--text-color);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
}
.tertiary-btn:hover:not(:disabled) {
    transform: translateY(-2px);
    background-color: #5c7299;
}

.action-btn:disabled {
    background-color: #3a475a;
    color: #8892b0;
    cursor: not-allowed;
    box-shadow: none;
    transform: none;
}

/* --- ãƒ­ã‚°ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« --- */
.log-module {
    flex: 1.2;
    background-color: var(--secondary-bg);
    border-radius: 8px;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
    padding: 20px;
    display: flex;
    flex-direction: column;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.log-heading {
    font-size: 1.2em;
    font-weight: 700;
    color: var(--accent-color);
    border-bottom: 1px solid rgba(255, 255, 255, 0.2);
    padding-bottom: 10px;
    margin-top: 0;
    margin-bottom: 15px;
    flex-shrink: 0;
}
.log-heading .fas {
    margin-right: 10px;
}

.prize-log-list {
    flex-grow: 1;
    overflow-y: auto;
    padding-right: 10px; 
    font-family: var(--font-secondary);
    font-size: 0.9em;
}

.prize-item {
    padding: 10px 5px;
    border-bottom: 1px dashed rgba(255, 255, 255, 0.1);
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.prize-item:last-child {
    border-bottom: none;
}

.status-indicator {
    display: inline-block;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    margin-right: 8px;
    vertical-align: middle;
}
.prize-item.current .status-indicator { background-color: var(--highlight-color); box-shadow: 0 0 8px var(--highlight-color); }
.prize-item.finished .status-indicator { background-color: #2ecc71; }
.prize-item.pending .status-indicator { background-color: #7f8c8d; }

.prize-item.current {
    background-color: rgba(255, 215, 0, 0.1);
    border-radius: 4px;
    padding-left: 10px;
    font-weight: 700;
    color: var(--highlight-color);
}

.winner-name-log {
    font-weight: 700;
    color: var(--accent-color);
    background-color: rgba(255, 255, 255, 0.1);
    padding: 3px 8px;
    border-radius: 4px;
}
.winner-name-log.no-winner {
    color: #8892b0;
    font-style: italic;
    background: none;
    padding: 0;
}

.prize-log-list::-webkit-scrollbar {
    width: 8px;
}
.prize-log-list::-webkit-scrollbar-track {
    background: #2a3d5b;
    border-radius: 4px;
}
.prize-log-list::-webkit-scrollbar-thumb {
    background: var(--accent-color);
    border-radius: 4px;
}
.prize-log-list::-webkit-scrollbar-thumb:hover {
    background: var(--highlight-color);
}

/* --- ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ --- */
@media (max-width: 1200px) {
    .main-layout {
        flex-direction: column;
        padding: 15px;
    }
    .winner-info-overlay {
        font-size: 1.6em;
    }
}

@media (max-width: 768px) {
    .slot-digit {
        width: 60px;
        height: 80px;
        line-height: 80px;
        font-size: 3.5em;
    }
    .slot-machine-display {
        gap: 8px;
    }
    .app-header {
        flex-direction: column;
        gap: 10px;
    }
    .winner-info-overlay {
        font-size: 1.2em;
        padding: 15px 25px;
    }
    .action-btn {
        flex-grow: 1;
    }
}